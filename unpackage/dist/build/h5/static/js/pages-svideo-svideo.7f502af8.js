(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-svideo-svideo"],{"02b7":function(n,t,e){"use strict";var i=e("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("6b54"),e("87b3"),e("7f7f");var a=i(e("8ee6")),o=[{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-01.mp4"},{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-02.mp4"},{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-03.mp4"},{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-01.mp4"},{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-02.mp4"},{src:"https://img-cdn-qiniu.dcloud.net.cn/hello-nvue-swiper-vertical-03.mp4"}],s={components:{Matches:a.default},data:function(){return{circular:!0,videoList:[],videoDataList:[],mockData:["92343700-01-18-31-300","92343700","875112600-00-23-08-300","875112600","835033400-00-19-23-300","835033400","4494309200-00-07-04-300","4494309200","2792454400-00-30-08-300","2792454400","2119833200-00-01-55-300","2119833200","13512996000-00-16-04-300","13512996000","13342399900-00-22-03-300","13342399900","130088896001-00-10-35-300","130088896001","11685671300-00-07-13-300","11685671300","11532266600-00-30-39-300","11532266600","10816079500-00-07-01-300","10816079500","10736140700-00-01-41-300","10736140700","10702713600-00-24-23-300","10702713600","10127072200-00-24-44-300","10127072200"],url:"https://markable-china-miniapp.s3.cn-north-1.amazonaws.com.cn/iqiyi/AQY-30/",play:!1,param:{time:"00000",video_id:"",options:{limit:5,detection_relevance:60,product_relevance:60,jd_only:!1}},currentTime:0,matches:[],scrollTop:"100vh",showList:[],videoIdList:[]}},onLoad:function(n){},onReady:function(){var n=[];this.mockData.map(function(t,e){-1==t.indexOf("-")&&n.push(t)}),console.log(n),this.mockData=n,this.init(),this.getData()},methods:{load:function(){uni.hideLoading()},handlePopup:function(){this.scrollTop="100vh",this.togglePlay()},getVideoResult:function(){var n=this;this.$api.getClientSearch({data:this.param}).then(function(t){var e=t.data.data,i=e.code,a=e.result;e.message;if(uni.hideLoading(),2e4==i&&a.length>0){n.scrollTop="20vh";var o=[];a.map(function(t,e){var i=[];t.matches&&t.matches.map(function(t){i.push({show:!0,ads:t.ads||!1,isFilter:!1,source:n.$filter.getShopSource(t.catalog.name),wechatlink:t.data.wechat_app_url?t.data.wechat_app_url:"",thumbnail:n.$filter.getThumbnail(t.images[0].uri),name:t.data.name,price:t.data.sale_price?t.data.sale_price:t.data.price,brand:t.data.brand,score:t.score?n.$filter.getToFixed(10*t.score):"6.0",shoplink:t.data.url?encodeURIComponent(t.data.url):"",currency:n.$filter.getCurrency(t.data.currency)})}),i.length>0&&o.push({index:e,tag:t.category.name?n.$filter.getChCatalog(t.category.name):"",matches:i,count:i.length})}),console.log(o,"商品及标签集合"),n.matches=o}else console.log("暂无识别结果"),n.$global.showToast("暂无识别结果")})},handleTimeupdate:function(n){var t=n.mp.detail.currentTime;this.currentTime=Math.floor(t)},format:function(n){var t=n.toString();return t?1==t.length?"0000"+t:2==t.length?"000"+t:3==t.length?"00"+t:4==t.length?"0"+t:t:"00000"},togglePlay:function(){if(console.log(this.play),this.play){this._videoContextList[this._videoIndex].pause(),this.param.time=this.format(this.currentTime);var n=this.mockData[this._videoIndex];console.log(n),this.param.video_id=n,uni.showLoading({title:"识别中..."}),this.matches=[],this.getVideoResult()}else this._videoContextList[this._videoIndex].play(),this.scrollTop="100vh";this.play=!this.play},init:function(){var n=this;this._videoIndex=0,this._videoContextList=[],this.mockData.map(function(t,e){n.videoList.push({id:"video".concat(e),src:"",img:""})});for(var t=0;t<this.videoList.length;t++)this._videoContextList.push(uni.createVideoContext("video"+t,this));this._videoDataIndex=0},getData:function(n){var t=this,e=[];this.mockData.map(function(n,i){e.push({src:"".concat(t.url).concat(n,".mp4")})}),o=e,this.videoDataList=o,setTimeout(function(){t.updateVideo(!0)},200)},onSwiperChange:function(n){var t=this;this.play=!0,this.currentTime=0;var e=n.detail.current;if(e!==this._videoIndex){var i=!1;0===e&&this._videoIndex===this.videoList.length-1?i=!0:e===this.videoList.length-1&&0===this._videoIndex?i=!1:e>this._videoIndex&&(i=!0),i?this._videoDataIndex++:this._videoDataIndex--,this._videoDataIndex<0?this._videoDataIndex=this.videoDataList.length-1:this._videoDataIndex>=this.videoDataList.length&&(this._videoDataIndex=0),this.circular=0!=this._videoDataIndex,this._videoIndex>=0&&(this._videoContextList[this._videoIndex].pause(),this._videoContextList[this._videoIndex].seek(0)),this._videoIndex=e,setTimeout(function(){t.updateVideo(i)},200)}},getNextIndex:function(n){var t=this._videoIndex+(n?1:-1);return t<0?this.videoList.length-1:t>=this.videoList.length?0:t},getNextDataIndex:function(n){var t=this._videoDataIndex+(n?1:-1);return t<0?this.videoDataList.length-1:t>=this.videoDataList.length?0:t},updateVideo:function(n){var t=this;this.$set(this.videoList[this._videoIndex],"src",this.videoDataList[this._videoDataIndex].src),this.$set(this.videoList[this.getNextIndex(n)],"src",this.videoDataList[this.getNextDataIndex(n)].src),setTimeout(function(){t._videoContextList[t._videoIndex].play(),console.log(t._videoContextList)},200),console.log(321321),console.log("v:"+this._videoIndex+" d:"+this._videoDataIndex+"; next v:"+this.getNextIndex(n)+" next d:"+this.getNextDataIndex(n))}}};t.default=s},"08de":function(n,t,e){var i=e("b288");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=e("4f06").default;a("850a681a",i,!0,{sourceMap:!1,shadowMode:!1})},"0a3e":function(n,t,e){"use strict";e.r(t);var i=e("529c"),a=e.n(i);for(var o in i)"default"!==o&&function(n){e.d(t,n,function(){return i[n]})}(o);t["default"]=a.a},"11d6":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"matches-box"},n._l(n.list,function(t,i){return e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:-1==n.idx||t.index==n.idx,expression:"idx == -1 || item.index == idx"}],key:i},[e("v-uni-text",{staticClass:"h3"},[n._v(n._s(t.tag))]),t.count&&t.count>0?e("v-uni-scroll-view",{staticClass:"scroll-box",attrs:{"scroll-x":""}},n._l(t.matches,function(t,a){return t.error?n._e():e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"child.show"}],key:a,staticClass:"card-box",on:{click:function(e){e=n.$handleEvent(e),n.toPath(t.shoplink,t.source.id)}}},[e("v-uni-view",{staticClass:"img-card img-bg"},[0==t.source.id?e("v-uni-image",{staticClass:"sale-icon",attrs:{src:"/static/images/temai.png",mode:"widthFix"}}):n._e(),e("v-uni-image",{staticClass:"img",attrs:{src:t.thumbnail,mode:6==t.source.id||5==t.source.id?"aspectFit":"aspectFill","lazy-load":!0},on:{error:function(t){t=n.$handleEvent(t),n.imgErr(i,a)}}})],1),e("v-uni-view",{staticClass:"desc-box"},[e("v-uni-view",{staticClass:"title omit2"},[n._v(n._s(t.name))]),e("v-uni-view",{staticClass:"vendor omit1"},[n._v(n._s(t.brand))]),e("v-uni-view",{staticClass:"bottom"},[e("v-uni-view",{staticClass:"price"},[e("v-uni-text",{staticClass:"currency"},[n._v(n._s(t.currency))]),n._v(n._s(4==t.source.id?t.price/100:t.price))],1),e("v-uni-view",{staticClass:"source-box"},[e("v-uni-view",{staticClass:"source-point",style:{background:t.source.bg}}),e("v-uni-view",{staticClass:"source-name",style:{color:t.source.bg}},[n._v(n._s(t.source.name))])],1)],1)],1)],1)}),1):e("Default")],1)}),1)},a=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return a})},"17b2":function(n,t,e){"use strict";e.r(t);var i=e("5ae7"),a=e("ed31");for(var o in a)"default"!==o&&function(n){e.d(t,n,function(){return a[n]})}(o);e("3dec");var s=e("2877"),r=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"b4ce9e9a",null);t["default"]=r.exports},"1dc8":function(n,t,e){"use strict";e.r(t);var i=e("622e"),a=e("2146");for(var o in a)"default"!==o&&function(n){e.d(t,n,function(){return a[n]})}(o);e("42a0");var s=e("2877"),r=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"64d2bcc4",null);t["default"]=r.exports},2146:function(n,t,e){"use strict";e.r(t);var i=e("be60"),a=e.n(i);for(var o in i)"default"!==o&&function(n){e.d(t,n,function(){return i[n]})}(o);t["default"]=a.a},"22de":function(n,t,e){var i=e("6083");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=e("4f06").default;a("b6501120",i,!0,{sourceMap:!1,shadowMode:!1})},"3dec":function(n,t,e){"use strict";var i=e("22de"),a=e.n(i);a.a},"42a0":function(n,t,e){"use strict";var i=e("4359"),a=e.n(i);a.a},4359:function(n,t,e){var i=e("d961");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=e("4f06").default;a("129a4f5e",i,!0,{sourceMap:!1,shadowMode:!1})},"529c":function(n,t,e){"use strict";var i=e("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(e("1dc8")),o={name:"matches",props:["list","index","from"],components:{Default:a.default},data:function(){return{idx:-1}},watch:{index:function(n){console.log(n),this.idx=n}},onLoad:function(n){},methods:{imgErr:function(n,t){this.$set(this.list[n].matches[t],"error",!0)},toPath:function(n,t){console.log(decodeURIComponent(n)),console.log(this.$filter.transUrl(decodeURIComponent(n),t,this.from))}}};t.default=o},"5ae7":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"page"},[e("v-uni-swiper",{staticClass:"swiper",attrs:{circular:n.circular,vertical:!0},on:{change:function(t){t=n.$handleEvent(t),n.onSwiperChange(t)}}},n._l(n.videoList,function(t){return e("v-uni-swiper-item",{key:t.id},[e("v-uni-video",{ref:t.id,refInFor:!0,staticClass:"video",attrs:{id:t.id,src:t.src,controls:!0,loop:!0,"show-center-play-btn":!1},on:{click:function(t){t=n.$handleEvent(t),n.togglePlay(t)},timeupdate:function(t){t=n.$handleEvent(t),n.handleTimeupdate(t)}}})],1)}),1),e("v-uni-view",{staticClass:"content",style:{top:n.scrollTop}},[e("v-uni-view",{staticClass:"title-box"},[e("v-uni-text",{staticClass:"p24 title weight"},[n._v("同款推荐")]),e("v-uni-view",{staticClass:"filter-box",on:{click:function(t){t=n.$handleEvent(t),n.handlePopup()}}},[e("v-uni-image",{staticClass:"fliter-icon",attrs:{src:"/static/images/cancel.png",mode:"widthFix"}})],1)],1),e("v-uni-view",{staticClass:"p24"},[e("Matches",{attrs:{list:n.matches}})],1)],1)],1)},a=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return a})},6083:function(n,t,e){t=n.exports=e("2350")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nuni-page-body[data-v-b4ce9e9a]{width:100%;height:100vh;\n      /* min-height: 100%; */overflow:hidden\n      /* display: flex; */}\n.page[data-v-b4ce9e9a]{\n      /* flex: 1; */width:100vw;height:100vh;\n      /* min-height: 100%; */overflow:hidden}.swiper[data-v-b4ce9e9a]{\n      /* flex: 1; */width:100vw;height:100vh;overflow:hidden;background-color:#fff}.swiper-item[data-v-b4ce9e9a]{width:100%;height:100%\n      /* flex: 1; */}.video[data-v-b4ce9e9a]{\n      /* flex: 1; */width:100vw;height:100vh;\nwidth:100%\n}.content[data-v-b4ce9e9a]{width:100vw;height:80vh;-webkit-transition:top .6s;-o-transition:top .6s;transition:top .6s;position:absolute;left:0;\n    /* top:20vh; */background:#fff;overflow-y:scroll}.title-box[data-v-b4ce9e9a]{width:100%;height:%?40?%;line-height:%?40?%;padding:%?22?% 0 %?26?%;display:block;background:#fff}.title[data-v-b4ce9e9a]{color:#525252;font-size:%?30?%;float:left}.filter-box[data-v-b4ce9e9a]{width:%?30?%;height:%?30?%;float:right;margin-right:%?24?%\n  /* background: #f00; */}.fliter-icon[data-v-b4ce9e9a]{width:%?30?%;height:%?30?%\n  /* margin-top:3upx; */\n\n  /* margin-top:5upx; */\n}",""])},"622e":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"default-box"},[e("v-uni-image",{staticClass:"default-img",attrs:{src:"/static/images/notData.png"}}),e("v-uni-view",{staticClass:"default-tip"},[n._v("呜呜呜~小麦木有找到商品...")])],1)},a=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return a})},"8ee6":function(n,t,e){"use strict";e.r(t);var i=e("11d6"),a=e("0a3e");for(var o in a)"default"!==o&&function(n){e.d(t,n,function(){return a[n]})}(o);e("a90e");var s=e("2877"),r=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"082ab0f3",null);t["default"]=r.exports},a90e:function(n,t,e){"use strict";var i=e("08de"),a=e.n(i);a.a},b288:function(n,t,e){t=n.exports=e("2350")(!1),t.push([n.i,".h3[data-v-082ab0f3]{width:100%;height:%?40?%;line-height:%?40?%;font-size:%?26?%;color:#525252;padding:%?30?% 0 %?20?% 0;font-weight:700;display:block}.scroll-box[data-v-082ab0f3]{width:100%;height:%?508?%;overflow-x:scroll;white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box}.card-box[data-v-082ab0f3]{width:%?284?%;height:%?500?%;background:#fff;-webkit-box-shadow:0 2px 6px 0 rgba(0,0,0,.06);box-shadow:0 2px 6px 0 rgba(0,0,0,.06);border-bottom:%?8?% solid #727272;border-radius:%?10?%;margin-right:%?12?%;display:inline-block;white-space:normal;overflow:hidden;vertical-align:middle}.img-card[data-v-082ab0f3]{width:%?284?%;height:%?346?%;position:relative;border-bottom:%?1?% solid #dfdfdf}.img[data-v-082ab0f3]{width:100%;height:100%;border-top-right-radius:%?10?%;border-top-left-radius:%?10?%}.desc-box[data-v-082ab0f3]{width:%?250?%;height:%?130?%;padding:%?14?% %?20?% %?6?%}.title[data-v-082ab0f3]{width:100%;height:%?60?%;font-size:%?22?%;color:#5e5e5e;line-height:%?32?%;font-family:PingFangSC-Semibold,sans-serif;margin-bottom:%?5?%}.vendor[data-v-082ab0f3]{width:100%;height:%?28?%;font-size:%?20?%;line-height:%?28?%;color:#777;margin-bottom:%?3?%}.bottom[data-v-082ab0f3]{width:100%;height:%?34?%;line-height:%?34?%}.price[data-v-082ab0f3]{width:auto;height:%?34?%;line-height:%?34?%;color:#ab3434;font-size:%?24?%;float:left;font-family:PingFangSC-Medium,sans-serif}.currency[data-v-082ab0f3]{font-size:%?20?%}.source-box[data-v-082ab0f3]{float:right;width:auto;height:%?27?%;line-height:%?27?%;padding:%?0?% %?8?%;margin-top:%?4?%;font-family:PingFangSC-Medium,sans-serif}.source-name[data-v-082ab0f3]{font-size:%?18?%;float:right;margin-right:%?6?%}.source-point[data-v-082ab0f3]{border-radius:50%;width:%?16?%;height:%?16?%;float:right;\nmargin:%?6?% %?-5?% 0 0;\nmargin:%?6?% %?-5?% 0 0}.sale-icon[data-v-082ab0f3]{position:absolute;right:0;top:0;width:%?60?%;height:auto;display:block;z-index:99}",""])},be60:function(n,t,e){},d961:function(n,t,e){t=n.exports=e("2350")(!1),t.push([n.i,".default-box[data-v-64d2bcc4]{width:100%;height:auto}.default-img[data-v-64d2bcc4]{width:%?80?%;height:%?80?%;margin:%?30?% auto;display:block}.default-tip[data-v-64d2bcc4]{width:100%;height:%?50?%;line-height:%?50?%;color:#999;font-size:%?24?%;text-align:center}",""])},ed31:function(n,t,e){"use strict";e.r(t);var i=e("02b7"),a=e.n(i);for(var o in i)"default"!==o&&function(n){e.d(t,n,function(){return i[n]})}(o);t["default"]=a.a}}]);